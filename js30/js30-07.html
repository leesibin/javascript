<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            background-color: #F7ECD6;
        }

        .big {
            margin: 50px;
            border: 3px solid #000;
            border-radius: 10px;
            background-color: #fff;
            width: 400px;
            height: 400px;
            box-shadow: 3px 3px 3px;
        }


        .pg {
            text-align: center;
            font-size: 20px;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const big = document.createElement('p')
            const pg = document.createElement('p')
            const div = document.createElement('div')
            const divbt = document.getElementsByClassName('input-group mb-3')
            const input = document.getElementsByClassName('form-control')
            const add = document.getElementsByClassName('btn btn-outline-secondary')

            pg.textContent = '할일목록'
            pg.setAttribute('class', 'pg')
            big.setAttribute('class', 'big')



            document.body.appendChild(big).append(pg, divbt[0], div)

            // 버튼누른후 생성 태그
            function div0() {
                const checkbox = document.createElement('input')
                const span = document.createElement('span')
                const br = document.createElement('br')
                const revise = document.createElement('button')
                const trash = document.createElement('img')  //취소 아이콘
                checkbox.setAttribute('type', 'checkbox')


                trash.setAttribute('src', '/js30/todoimg/trash.png')
                trash.style.cssText = 'width: 15px; height: 15px;'
                span.append(todo)
                div.append(checkbox, span, trash, br)

                //요소제거하기
                trash.addEventListener('click', (e) => {
                    div.removeChild(checkbox)
                    div.removeChild(span)
                    div.removeChild(trash)
                    div.removeChild(br)

                })
                //체크박스
                checkbox.addEventListener('click', (event) => {
                    if (todo) {   //체크가되면
                        span.style.cssText = 'text-decoration-line: line-through; color: rgba(0, 0, 0, 0.4);'  //스타일 적용
                    }
                    arr.pop()
                    input.value = todo
                    localStorage.setItem('good', arr)
                })

            }
            let arr = []
            let todo = ''

            //엔터 기능 추가
            input[0].addEventListener('keyup', (e) => {
                todo = e.currentTarget.value
                input.value = todo
                const ENTER = 13
                if (e.keyCode === ENTER) {
                    arr.push(todo)
                    div0()
                }
                localStorage.setItem('good', arr)
            })

            //생성버튼 
            add[0].addEventListener('click', () => {
                input.value = todo
                div0()
                if (todo) {
                    arr.push(todo)
                }
                localStorage.setItem('good', arr)
            })
        })
    </script>
</head>


<body>
    <!-- 전체 입력과 버튼 -->
    <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="입력해주세요" aria-label="Recipient's username"
            aria-describedby="button-addon2">
        <button class="btn btn-outline-secondary" type="button" id="button-addon2">Button</button>
    </div>
    <!--  -->

</body>

</html>